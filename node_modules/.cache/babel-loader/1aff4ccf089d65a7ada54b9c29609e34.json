{"ast":null,"code":"import _slicedToArray from \"/Users/sal/Desktop/github/react-crud-hooks-example/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/sal/Desktop/github/react-crud-hooks-example/src/ice-cream/AddIceCream.js\";\nimport React, { useEffect, useState } from 'react';\nimport Main from '../structure/Main';\nimport LoaderMessage from '../structure/LoaderMessage';\nimport IceCream from './IceCream';\nimport { getIceCream, postMenuItem } from '../data/iceCreamData';\nimport PropTypes from 'prop-types';\n\nconst AddIceCream = ({\n  location,\n  history\n}) => {\n  const _useState = useState(true),\n        _useState2 = _slicedToArray(_useState, 2),\n        isLoading = _useState2[0],\n        setIsLoading = _useState2[1];\n\n  const _useState3 = useState({}),\n        _useState4 = _slicedToArray(_useState3, 2),\n        iceCream = _useState4[0],\n        setIceCream = _useState4[1];\n\n  useEffect(() => {\n    let isMounted = true;\n    getIceCream(location.search.split('=')[1]).then(iceCreamResponse => {\n      if (isMounted) {\n        setIceCream(iceCreamResponse);\n        setIsLoading(false);\n      }\n    }).catch(err => {\n      if (err.response.status === 404 && isMounted) {\n        history.replace('/', {\n          focus: true\n        });\n      }\n    });\n    return () => {\n      isMounted = false;\n    };\n  }, [history, location.search]);\n\n  const onSubmitHandler = menuItem => {\n    postMenuItem(menuItem).then(() => {\n      history.push('/', {\n        focus: true\n      });\n    });\n  };\n\n  return React.createElement(Main, {\n    headingText: \"Add some goodness to the menu\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38\n    },\n    __self: this\n  }, React.createElement(LoaderMessage, {\n    loadingMsg: \"Loading ice cream.\",\n    doneMsg: \"Ice cream loaded.\",\n    isLoading: isLoading,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39\n    },\n    __self: this\n  }), !isLoading && React.createElement(IceCream, {\n    iceCream: iceCream,\n    onSubmit: onSubmitHandler,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  }));\n};\n\nAddIceCream.propTypes = {\n  location: PropTypes.shape({\n    search: PropTypes.string.isRequired\n  }),\n  history: PropTypes.shape({\n    push: PropTypes.func.isRequired,\n    replace: PropTypes.func.isRequired\n  })\n};\nexport default AddIceCream;","map":{"version":3,"sources":["/Users/sal/Desktop/github/react-crud-hooks-example/src/ice-cream/AddIceCream.js"],"names":["React","useEffect","useState","Main","LoaderMessage","IceCream","getIceCream","postMenuItem","PropTypes","AddIceCream","location","history","isLoading","setIsLoading","iceCream","setIceCream","isMounted","search","split","then","iceCreamResponse","catch","err","response","status","replace","focus","onSubmitHandler","menuItem","push","propTypes","shape","string","isRequired","func"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,OAAOC,IAAP,MAAiB,mBAAjB;AACA,OAAOC,aAAP,MAA0B,4BAA1B;AACA,OAAOC,QAAP,MAAqB,YAArB;AACA,SAASC,WAAT,EAAsBC,YAAtB,QAA0C,sBAA1C;AACA,OAAOC,SAAP,MAAsB,YAAtB;;AAEA,MAAMC,WAAW,GAAG,CAAC;AAAEC,EAAAA,QAAF;AAAYC,EAAAA;AAAZ,CAAD,KAA2B;AAAA,oBACXT,QAAQ,CAAC,IAAD,CADG;AAAA;AAAA,QACtCU,SADsC;AAAA,QAC3BC,YAD2B;;AAAA,qBAEbX,QAAQ,CAAC,EAAD,CAFK;AAAA;AAAA,QAEtCY,QAFsC;AAAA,QAE5BC,WAF4B;;AAI7Cd,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIe,SAAS,GAAG,IAAhB;AACAV,IAAAA,WAAW,CAACI,QAAQ,CAACO,MAAT,CAAgBC,KAAhB,CAAsB,GAAtB,EAA2B,CAA3B,CAAD,CAAX,CACGC,IADH,CACQC,gBAAgB,IAAI;AACxB,UAAIJ,SAAJ,EAAe;AACbD,QAAAA,WAAW,CAACK,gBAAD,CAAX;AACAP,QAAAA,YAAY,CAAC,KAAD,CAAZ;AACD;AACF,KANH,EAOGQ,KAPH,CAOSC,GAAG,IAAI;AACZ,UAAIA,GAAG,CAACC,QAAJ,CAAaC,MAAb,KAAwB,GAAxB,IAA+BR,SAAnC,EAA8C;AAC5CL,QAAAA,OAAO,CAACc,OAAR,CAAgB,GAAhB,EAAqB;AAAEC,UAAAA,KAAK,EAAE;AAAT,SAArB;AACD;AACF,KAXH;AAYA,WAAO,MAAM;AACXV,MAAAA,SAAS,GAAG,KAAZ;AACD,KAFD;AAGD,GAjBQ,EAiBN,CAACL,OAAD,EAAUD,QAAQ,CAACO,MAAnB,CAjBM,CAAT;;AAmBA,QAAMU,eAAe,GAAGC,QAAQ,IAAI;AAClCrB,IAAAA,YAAY,CAACqB,QAAD,CAAZ,CAAuBT,IAAvB,CAA4B,MAAM;AAChCR,MAAAA,OAAO,CAACkB,IAAR,CAAa,GAAb,EAAkB;AAAEH,QAAAA,KAAK,EAAE;AAAT,OAAlB;AACD,KAFD;AAGD,GAJD;;AAMA,SACE,oBAAC,IAAD;AAAM,IAAA,WAAW,EAAC,+BAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,aAAD;AACE,IAAA,UAAU,EAAC,oBADb;AAEE,IAAA,OAAO,EAAC,mBAFV;AAGE,IAAA,SAAS,EAAEd,SAHb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAMG,CAACA,SAAD,IACC,oBAAC,QAAD;AAAU,IAAA,QAAQ,EAAEE,QAApB;AAA8B,IAAA,QAAQ,EAAEa,eAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAPJ,CADF;AAYD,CAzCD;;AA2CAlB,WAAW,CAACqB,SAAZ,GAAwB;AACtBpB,EAAAA,QAAQ,EAAEF,SAAS,CAACuB,KAAV,CAAgB;AACxBd,IAAAA,MAAM,EAAET,SAAS,CAACwB,MAAV,CAAiBC;AADD,GAAhB,CADY;AAItBtB,EAAAA,OAAO,EAAEH,SAAS,CAACuB,KAAV,CAAgB;AACvBF,IAAAA,IAAI,EAAErB,SAAS,CAAC0B,IAAV,CAAeD,UADE;AAEvBR,IAAAA,OAAO,EAAEjB,SAAS,CAAC0B,IAAV,CAAeD;AAFD,GAAhB;AAJa,CAAxB;AAUA,eAAexB,WAAf","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport Main from '../structure/Main';\nimport LoaderMessage from '../structure/LoaderMessage';\nimport IceCream from './IceCream';\nimport { getIceCream, postMenuItem } from '../data/iceCreamData';\nimport PropTypes from 'prop-types';\n\nconst AddIceCream = ({ location, history }) => {\n  const [isLoading, setIsLoading] = useState(true);\n  const [iceCream, setIceCream] = useState({});\n\n  useEffect(() => {\n    let isMounted = true;\n    getIceCream(location.search.split('=')[1])\n      .then(iceCreamResponse => {\n        if (isMounted) {\n          setIceCream(iceCreamResponse);\n          setIsLoading(false);\n        }\n      })\n      .catch(err => {\n        if (err.response.status === 404 && isMounted) {\n          history.replace('/', { focus: true });\n        }\n      });\n    return () => {\n      isMounted = false;\n    };\n  }, [history, location.search]);\n\n  const onSubmitHandler = menuItem => {\n    postMenuItem(menuItem).then(() => {\n      history.push('/', { focus: true });\n    });\n  };\n\n  return (\n    <Main headingText=\"Add some goodness to the menu\">\n      <LoaderMessage\n        loadingMsg=\"Loading ice cream.\"\n        doneMsg=\"Ice cream loaded.\"\n        isLoading={isLoading}\n      />\n      {!isLoading && (\n        <IceCream iceCream={iceCream} onSubmit={onSubmitHandler} />\n      )}\n    </Main>\n  );\n};\n\nAddIceCream.propTypes = {\n  location: PropTypes.shape({\n    search: PropTypes.string.isRequired,\n  }),\n  history: PropTypes.shape({\n    push: PropTypes.func.isRequired,\n    replace: PropTypes.func.isRequired,\n  }),\n};\n\nexport default AddIceCream;\n"]},"metadata":{},"sourceType":"module"}